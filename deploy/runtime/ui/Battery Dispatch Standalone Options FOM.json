{
    "Name": "Battery Dispatch Standalone Options FOM",
    "Width": 1053.0,
    "Height": 158.0,
    "FormObjects": {
        "CheckBox": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "batt_dispatch_auto_can_gridcharge"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 306.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 60.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 348.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 21.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "Battery can charge from grid"
                },
                "State": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": 6.0
                }
            }
        },
        "RadioChoice": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "batt_dispatch_choice_ui"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 15.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 57.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 288.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 88.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Selection": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "Items": {
                    "Type": 6.0,
                    "StringList": "Automated dispatch|Dispatch to custom time series|Manual dispatch"
                },
                "ShowCaptions": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "Horizontal": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": 1.0
                }
            }
        },
        "Label": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "lbl_dispatch_options"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 15.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 21.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 918.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 36.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": ""
                },
                "TextColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "FontSize": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "WordWrap": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "AlignRight": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "AlignTop": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        },
        "Label": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "lbl_fom_warning_message"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 657.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 60.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 381.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 83.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": ""
                },
                "TextColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "FontSize": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "WordWrap": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "AlignRight": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "AlignTop": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        },
        "GroupBox": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "object 4"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 6.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 3.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 1042.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 150.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "Front-of-meter (FOM) Storage Dispatch Options"
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        }
    },
    "VarDatabase": {
        "batt_dispatch_auto_can_gridcharge": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Battery can charge from grid",
            "Units": "0/1",
            "Group": "Battery Dispatch",
            "IndexLabels": "",
            "Flags": 3.0,
            "DefaultValue": 0.0,
            "UIObject": "CheckBox",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "batt_dispatch_choice": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Battery dispatch option",
            "Units": " ",
            "Group": "Battery Dispatch",
            "IndexLabels": "",
            "Flags": 8.0,
            "DefaultValue": 0.0,
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "batt_dispatch_choice_ui": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Battery dispatch options FOM",
            "Units": " ",
            "Group": "Battery Dispatch",
            "IndexLabels": "",
            "Flags": 3.0,
            "DefaultValue": 0.0,
            "UIObject": "RadioChoice",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "degradation": {
            "Version": 4.0,
            "Type": 2.0,
            "Label": " ",
            "Units": " ",
            "Group": "Battery Dispatch",
            "IndexLabels": "",
            "Flags": 8.0,
            "DefaultValue": [
                0.0
            ],
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "en_batt": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Enable battery model",
            "Units": " ",
            "Group": "Battery Dispatch",
            "IndexLabels": "",
            "Flags": 9.0,
            "DefaultValue": 0.0,
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "system_use_lifetime_output": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": " ",
            "Units": " ",
            "Group": "Battery Dispatch",
            "IndexLabels": "",
            "Flags": 8.0,
            "DefaultValue": 0.0,
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        }
    },
    "Equations": "equations{'batt_dispatch_choice'} = define() {\n\tif (${batt_dispatch_choice_ui} == 0)\n\t\treturn ${batt_dispatch_choice_ui};\n\telse\n\t\treturn ${batt_dispatch_choice_ui} + 1;\n};\n\nequations{'system_use_lifetime_output'} = define() {\n\treturn 1;\n};\n\nequations {'degradation'} = define() {\n\treturn [0];\n};\n\nequations {'en_batt'} = define() {\n\treturn 1;\n};",
    "Callbacks": "on_load{'Battery Dispatch Standalone Options FOM'} = define() \n{\n\tshow_hide_charge_options();\n\tcheck_auto_ppa();\n\twarning_message();\n\tif ( technology() == 'Fuel Cell' && value('en_batt') == 0 )\n\t{ \n\t\tmsg = 'Battery storage is not enabled. Enable battery on Battery Storage page before setting storage dispatch options.';\n\t\tclr = 'red';\n\t}\n\telse\n\t{\n\t\tmsg = 'The storage dispatch options determine how and when the battery charges and discharges. Choose an option below and then provide the dispatch details as appropriate.';\n\t\tclr = 'black';\n\t}\n\tproperty('lbl_dispatch_options','Caption',msg);\n\tproperty('lbl_dispatch_options','TextColour',clr);\n};\n\non_change{'batt_dispatch_choice_ui'} = define() \n{\n\tshow_hide_charge_options();\n\tcheck_auto_ppa();\n\tvalue('batt_dispatch_excl', value('batt_dispatch_choice_ui'));\n};\n\nfunction check_auto_ppa()\n{\n\tdispatch = value('batt_dispatch_choice_ui');\n\tif (dispatch == 0 && financing() != 'Merchant Plant') \n\t{\n\t\tppa_mode = value('ppa_soln_mode');\n\t\tif (ppa_mode == 0) \n\t\t{\n\t\t\tmsgbox('Specify IRR Target not available for automated dispatch.\\nThe automated battery dispatch options require the Specify PPA Price option on the Revenue or Financial Parameters page.\\n\\nPlease change Specify IRR Target to Specify PPA Price and specify a PPA price and optional escalation rate to use the Automated Dispatch options.');\n\t\t}\n\t}\n}\n\n// hide charge options for manual dispatch\nfunction show_hide_charge_options()\n{\n\toption = value('batt_dispatch_choice_ui');\n\tif (option == 2) \n\t{\n\t\tvalue('batt_dispatch_auto_can_gridcharge', false);\n\t\tshow('batt_dispatch_auto_can_gridcharge', false);\n\t\trefresh();\n\t}\n\telse \n\t{\n\t\tvalue('batt_dispatch_auto_can_gridcharge', true);\n\t\tenable('batt_dispatch_auto_can_gridcharge', false);\n\t}\n}\n\nfunction warning_message() \n{\n\tis_dc = (value('batt_ac_or_dc' ) == 0);\n\tcolor = 'black';\n\tif ( is_dc )\n\t{\n\t\tmsg = 'Battery is DC-connected.'; \n\t}\n\telse\n\t{ \n\t\tmsg = 'Battery is AC-connected.'; \n\t}\n\tif ( value('batt_dispatch_choice_ui') == 2 ) \n\t{\n\t\tmsg = ''; \n\t}\n\t/*\n\telseif ( value('batt_dispatch_choice_ui') == 3 ) \n\t{ \n\t\tif ( technology() != 'PV Battery' )\n\t\t{\n\t\t\tmsg = 'The PV smoothing option only works for PV Battery configurations.';\n\t\t\tcolor = 'red'; \n\t\t}\t\n\t}\n\t*/\n\tproperty('lbl_fom_warning_message','Caption',msg);\n\tproperty('lbl_fom_warning_message','TextColour',color);\n}\n"
}
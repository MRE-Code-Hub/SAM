{
    "Name": "Marine Wave Resource Time Series",
    "Width": 1018.0,
    "Height": 728.0,
    "FormObjects": {
        "Hyperlink": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "Hyperlink2"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 33.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 546.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 940.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 30.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "For locations not covered by the wave resource library, click here to go to the SAM website Weather Page for links to other data sources."
                },
                "URL": {
                    "Type": 5.0,
                    "String": "https://sam.nrel.gov/weather-data"
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": 0.0
                }
            }
        },
        "Button": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "btn_add_remove_folders"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 636.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 357.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 252.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 30.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "Add/remove weather file folders..."
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": 2.0
                }
            }
        },
        "Button": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "btn_refresh_library"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 636.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 387.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 252.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 30.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "Refresh library"
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": 3.0
                }
            }
        },
        "Button": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "btn_view_wave_data"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 888.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 321.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 94.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 28.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "View Data"
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": -1.0
                }
            }
        },
        "Button": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "btn_wave_download"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 33.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 510.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 234.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 28.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "Download and add to library..."
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": 10.0
                }
            }
        },
        "Label": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "caption_library"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 18.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 54.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 855.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 36.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "SAM's default library comes with only a few weather files to help you get started. Use the download tools below to build a library of locations you frequently model. Once you build your library, it is available for all of your work in SAM."
                },
                "TextColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "FontSize": {
                    "Type": 3.0,
                    "Integer": -1.0
                },
                "WordWrap": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "AlignRight": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "AlignTop": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        },
        "Label": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "download_weather_caption"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 453.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 972.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 43.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "The High Resolution Ocean Surface Wave Hindcast database contains 30 years of 3-hour wave data for the coastal United States that you can download and add to your wave resource library. Download the a time-series file based for a year or range of years. If your request fails or results in an error message, please try again until it succeeds."
                },
                "TextColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "FontSize": {
                    "Type": 3.0,
                    "Integer": -1.0
                },
                "WordWrap": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "AlignRight": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "AlignTop": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        },
        "GroupBox": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "group_library"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 12.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 3.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 1000.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 424.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "Wave Energy Resource Library"
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        },
        "Label": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "jpd_file_generation_caption"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 33.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 621.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 972.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 48.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "To convert time series data files to a JPD file, create a folder that contains a set of time series data files for a given location. Then click the Create JPD button below and follow the prompts to choose the folder and create a file name for the converted JPD data. SAM automatically adds the JPD file to the wave energy resource library for the Frequency of Occurrence option. See Help for details."
                },
                "TextColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "FontSize": {
                    "Type": 3.0,
                    "Integer": -1.0
                },
                "WordWrap": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "AlignRight": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "AlignTop": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        },
        "Button": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "jpd_multiyear"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 33.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 678.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 276.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 28.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "Create JPD from time series weather file(s)"
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": -1.0
                }
            }
        },
        "Label": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "label_library"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 18.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 30.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 860.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 21.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "Click a name in the list to choose a file from the library. Type a few letters of the name in the search box to filter the list."
                },
                "TextColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "FontSize": {
                    "Type": 3.0,
                    "Integer": -1.0
                },
                "WordWrap": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "AlignRight": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "AlignTop": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        },
        "MultilineText": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "library_folder_list"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 33.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 357.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 588.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 60.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Text": {
                    "Type": 5.0,
                    "String": "List of Wave Resource library folders"
                },
                "Editable": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "ForeColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "BackColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 255.0,
                        "Green": 255.0,
                        "Blue": 255.0,
                        "Alpha": 255.0
                    }
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": -1.0
                }
            }
        },
        "Library": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "location_ts"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 21.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 93.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 965.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 216.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Library": {
                    "Type": 5.0,
                    "String": "WaveResourceTSData"
                },
                "Fields": {
                    "Type": 5.0,
                    "String": "Location ID,Distance to shore,Water depth,Latitude,Longitude,Year,Time Zone,Data Source,Notes"
                }
            }
        },
        "GroupBox": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "object 4"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 12.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 597.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 1000.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 126.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "JPD File Generation"
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        },
        "GroupBox": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "object 46"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 12.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 432.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 1000.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 159.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "Download Marine Energy Resource Files"
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        },
        "TextEntry": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "wave_resource_filename_ts"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 198.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 321.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 684.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Text": {
                    "Type": 5.0,
                    "String": ""
                },
                "Editable": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ForeColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 128.0,
                        "Green": 0.0,
                        "Blue": 64.0,
                        "Alpha": 255.0
                    }
                },
                "BackColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 255.0,
                        "Green": 255.0,
                        "Blue": 255.0,
                        "Alpha": 255.0
                    }
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": -1.0
                }
            }
        }
    },
    "VarDatabase": {
        "data_source": {
            "Version": 4.0,
            "Type": 4.0,
            "Label": " ",
            "Units": " ",
            "Group": "ME Wave Resource",
            "IndexLabels": "",
            "Flags": 8.0,
            "DefaultValue": "<invalid>",
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "distance_to_shore_file": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Distance to shore",
            "Units": "m",
            "Group": "ME Wave Resource",
            "IndexLabels": "",
            "Flags": 8.0,
            "DefaultValue": 0.0,
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "energy_period": {
            "Version": 4.0,
            "Type": 2.0,
            "Label": "Wave Energy Period",
            "Units": "s",
            "Group": "ME Wave Resource",
            "IndexLabels": "",
            "Flags": 9.0,
            "DefaultValue": [
                0.0
            ],
            "UIObject": "DataArray",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "lat": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Latitude",
            "Units": "degrees",
            "Group": "ME Wave Resource",
            "IndexLabels": "",
            "Flags": 9.0,
            "DefaultValue": 0.0,
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "library_folder_list": {
            "Version": 4.0,
            "Type": 4.0,
            "Label": "Library folder list",
            "Units": " ",
            "Group": "ME Wave Resource",
            "IndexLabels": "",
            "Flags": 9.0,
            "DefaultValue": "0",
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "location_id": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Location",
            "Units": " ",
            "Group": "ME Wave Resource",
            "IndexLabels": "",
            "Flags": 8.0,
            "DefaultValue": 0.0,
            "UIObject": "Numeric",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "location_ts": {
            "Version": 4.0,
            "Type": 4.0,
            "Label": "Wave resource location",
            "Units": " ",
            "Group": "ME Wave Resource",
            "IndexLabels": "WaveResourceTSData|0",
            "Flags": 19.0,
            "DefaultValue": "PacWave East",
            "UIObject": "Library",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "lon": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Longitude",
            "Units": "degrees",
            "Group": "ME Wave Resource",
            "IndexLabels": "",
            "Flags": 9.0,
            "DefaultValue": 0.0,
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "name": {
            "Version": 4.0,
            "Type": 4.0,
            "Label": " ",
            "Units": " ",
            "Group": "ME Wave Resource",
            "IndexLabels": "",
            "Flags": 9.0,
            "DefaultValue": "<invalid>",
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "notes": {
            "Version": 4.0,
            "Type": 4.0,
            "Label": "Notes",
            "Units": " ",
            "Group": "ME Wave Resource",
            "IndexLabels": "",
            "Flags": 9.0,
            "DefaultValue": "0",
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "number_hours": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Number of hours in wave file",
            "Units": "hr",
            "Group": "ME Wave Resource",
            "IndexLabels": "",
            "Flags": 9.0,
            "DefaultValue": 0.0,
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "number_records": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Number of records in wave file",
            "Units": " ",
            "Group": "ME Wave Resource",
            "IndexLabels": "",
            "Flags": 9.0,
            "DefaultValue": 0.0,
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "significant_wave_height": {
            "Version": 4.0,
            "Type": 2.0,
            "Label": "Significant wave height",
            "Units": "m ",
            "Group": "ME Wave Resource",
            "IndexLabels": "",
            "Flags": 9.0,
            "DefaultValue": [
                0.0
            ],
            "UIObject": "DataArray",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "tz": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": " Time Zone",
            "Units": " ",
            "Group": "ME Wave Resource",
            "IndexLabels": "",
            "Flags": 9.0,
            "DefaultValue": 0.0,
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "ui_step_minutes": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Time step",
            "Units": "Minutes",
            "Group": "ME Wave Resource",
            "IndexLabels": "",
            "Flags": 9.0,
            "DefaultValue": 0.0,
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "water_depth_file": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Water depth",
            "Units": "m",
            "Group": "ME Wave Resource",
            "IndexLabels": "",
            "Flags": 8.0,
            "DefaultValue": 0.0,
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "wave_resource_filename_ts": {
            "Version": 4.0,
            "Type": 4.0,
            "Label": "Wave resource file from library",
            "Units": " ",
            "Group": "ME Wave Resource ",
            "IndexLabels": "",
            "Flags": 8.0,
            "DefaultValue": "",
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "year": {
            "Version": 4.0,
            "Type": 2.0,
            "Label": "Year of wave resource file",
            "Units": "yr",
            "Group": "ME Wave Resource",
            "IndexLabels": "",
            "Flags": 9.0,
            "DefaultValue": [
                0.0
            ],
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        }
    },
    "Equations": {
        "1": "equations{ 'ui_step_minutes' } = define() {",
        "2": "\tarray = ${energy_period};",
        "3": "\tlen_array = #array;",
        "4": "\treturn 60 / (len_array/8760);",
        "5": "};",
        "6": "",
        "7": ""
    },
    "Callbacks": {
        "1": "/*",
        "2": "function enable_disable_library() {",
        "3": "\t",
        "4": "\tenable('wave_resource_matrix',false);",
        "5": "\tproperty('wave_resource_matrix','ColorMap',enable_library);",
        "6": "\tenable('location_ts',enable_library);",
        "7": "\tenable('btnScanLibrary_ts',enable_library);",
        "8": "\tenable('average_power_flux_ts',enable_library);",
        "9": "\tenable('bathymetry_ts',enable_library);",
        "10": "\tenable('city_ts',enable_library);",
        "11": "\tenable('country_ts',enable_library);",
        "12": "\tenable('data_source_ts',enable_library);",
        "13": "\tenable('wave_resource_filename_ts',enable_library);",
        "14": "\tenable('frequency_sum',enable_library);",
        "15": "\tenable('lat_ts',enable_library);",
        "16": "\tenable('location_ts',enable_library);",
        "17": "\tenable('lon_ts',enable_library);",
        "18": "\t//enable('max_frequency',enable_library);",
        "19": "\t//enable('max_frequency_Hs',enable_library);",
        "20": "\t//enable('max_frequency_Te',enable_library);",
        "21": "\tenable('name_ts',enable_library);",
        "22": "\tenable('nearby_buoy_number_ts',enable_library);",
        "23": "\tenable('notes_ts',enable_library);",
        "24": "\tenable('sea_bed_ts',enable_library);",
        "25": "\tenable('state_ts',enable_library);",
        "26": "\tenable('tz_ts',enable_library);",
        "27": "\t//enable('in_time_frame',enable_library);",
        "28": "\t//enable('in_location',enable_library);",
        "29": "\t//enable('wave_download',enable_library);",
        "30": "\trefresh();",
        "31": "\t",
        "32": "}*/",
        "33": "",
        "34": "on_change{'btn_view_wave_data'} = define() {",
        "35": "\tif ( dview_wave(value('wave_resource_filename_ts')) )",
        "36": "\t{\tmsgbox('Failed to read file!\\nThe data viewer was not able to open the weather file:\\n' + value('wave_resource_filename_ts') ); }",
        "37": "};",
        "38": "",
        "39": "on_change{'jpd_multiyear'} = define() {",
        "40": "\tjpd_multiyear_gen();",
        "41": "};",
        "42": "",
        "43": "function jpd_multiyear_gen() {",
        "44": "\tfolder = choose_dir('', 'Choose folder containing single-year wave resource files');",
        "45": "\t//file = choose_file();",
        "46": "\tif (folder != '') {",
        "47": "\t\tfile = choose_file( '', 'Save multi-year JPD file as', ",
        "48": "\t\t\t'JPD file (*.csv)|*.csv', true);",
        "49": "\t\tif (file != '') {",
        "50": "\t\t\tname = make_jpd_multiyear(folder, slash_back_to_forward(file));",
        "51": "\t\t\tfile_path = path_only(file);",
        "52": "\t\t\tif (strpos(value('library_folder_list'), slash_back_to_forward(file_path)) == -1) {",
        "53": "\t\t\t\tupdate_library_folders(path_only(file));",
        "54": "\t\t\t}",
        "55": "\t\t\trescanlibrary('wave');",
        "56": "\t\t\tvalue('wave_resource_filename', file);",
        "57": "\t\t\tvalue( 'location', name );",
        "58": "\t\t\tvalue('name', name);",
        "59": "\t\t\trefresh('location');",
        "60": "\t\t\tmsgbox(\"Multi-year JPD file saved.\\nTo use the file, switch from the Time Series option to Frequency of Occurrence, and choose \" + to_string(value('name')) + \" from the library.\");",
        "61": "\t\t\t",
        "62": "\t\t}",
        "63": "\t}",
        "64": "}",
        "65": "",
        "66": "on_change{'btn_refresh_library'} = define() {",
        "67": "\trescanlibrary('wave_ts');",
        "68": "\trefresh('wave_resource_matrix');",
        "69": "\t//update_info('on_change btn_refresh_library');",
        "70": "};",
        "71": "",
        "72": "on_change{'btn_add_remove_folders'} = define() {",
        "73": "\tif ( showsettings( 'wave' ) )",
        "74": "\t{",
        "75": "\t\tupdate_library_folders( '' );",
        "76": "\t\t/*// if current library selection is no longer in library, change to first item listed in library CSV file",
        "77": "\t\tL = strlen( value( 'library_folder_list' ) );",
        "78": "\t\tif ( strlen( value( 'library_folder_list' ) ) < L )",
        "79": "\t\t{",
        "80": "\t\t\tif ( !solar_library(value('solar_resource_file'),false){'is_in_library'} )",
        "81": "\t\t\t{",
        "82": "\t\t\t\tfirst_item = solar_library(value('solar_resource')){'first_item_key'};",
        "83": "\t\t\t\tfirst_item = replace( file_only(first_item), '.csv', '' );",
        "84": "\t\t\t\tmsgbox( 'Selected weather file not in solar resource library!\\nThe file ' ",
        "85": "\t\t\t\t\t     + value( file_only('solar_resource_file') )",
        "86": "\t\t\t\t\t     + ' is not in the solar resource library. Changing library selection to ' ",
        "87": "\t\t\t\t\t     +  first_item  + '.' );",
        "88": "\t\t\t\tvalue( 'solar_resource' , first_item );",
        "89": "\t\t\t}\t",
        "90": "\t\t}*/",
        "91": "\t}",
        "92": "};",
        "93": "",
        "94": "",
        "95": "function wave_library( item, is_key )",
        "96": "{",
        "97": "\tT = {};",
        "98": "\tlib_file = userlocaldatadir() + '/WaveResourceTSData.csv';",
        "99": "\tlib_data = csvread( lib_file, { 'table' = true } );",
        "100": "\tfiles = lib_data{'File name'}; files -@ 0; files -@ 0;",
        "101": "\tfor( i=0; i<#files; i++) { files[i] = lower(slash_back_to_forward(files[i])); }",
        "102": "\tkeys = lib_data{'Name'}; keys -@ 0; keys -@ 0;",
        "103": "\tif ( is_key ) { ii = keys ?@ item; }",
        "104": "\telse { ii = files ?@ lower(item); }",
        "105": "\tT{'is_in_library'} = false; ",
        "106": "\tT{'lib_key'} = null;",
        "107": "\tif ( ii > -1 ) ",
        "108": "\t{",
        "109": "\t\tT{'is_in_library'} = true; ",
        "110": "\t\tT{'lib_key'} = keys[ii];",
        "111": "\t\tT{'file_name'} = files[ii];",
        "112": "\t}",
        "113": "\tT{'num_files_in_library'} = #files;",
        "114": "\tstr = slash_back_to_forward( appdir() );",
        "115": "\tarr = split( str, '/' );",
        "116": "\tarr -@ #arr-1;",
        "117": "\tarr[#arr] = 'location_ts';",
        "118": "\tdefault_path = '';",
        "119": "\tfor( i=0; i<#arr; i++ ) {default_path += arr[i] + '/'; }",
        "120": "\tdefault_files = dir_list( default_path, '*', false );",
        "121": "\tT{'num_default_files'} = #default_files;",
        "122": "\treturn T;",
        "123": "}",
        "124": "",
        "125": "",
        "126": "on_load{'Marine Wave Resource Time Series'} = define() {",
        "127": "\t",
        "128": "\t//rescanlibrary('wave_ts');",
        "129": "\t//enable(\"wave_resource_matrix\",false);",
        "130": "\t//on_change{'use_specific_ts_wf_wave'}();",
        "131": "\t//enable_disable_library();",
        "132": "\tupdate_library_folders(''); // refresh list of library folders",
        "133": "\t//show('wave_resource_matrix', false);",
        "134": "\trefresh();",
        "135": "};",
        "136": "",
        "137": "on_change{'location_ts'} = define() {",
        "138": "\tfile = ${wave_resource_filename_ts};",
        "139": "\t//value(\"location_id\",value(\"location_ts\"));",
        "140": "\trefresh();",
        "141": "\tif (!file_exists(file))",
        "142": "\t{",
        "143": "\t\trescanlibrary( 'wave_ts' );",
        "144": "\t\trefresh('location_ts');",
        "145": "\t\treturn;",
        "146": "\t}",
        "147": "\tfile = replace(file, '\\\\', '/');",
        "148": "\tfn = open(file,'r');",
        "149": "\trefresh('wave_resource_matrix');",
        "150": "\tclose(fn);",
        "151": "\t//update_info('on_change location_ts');",
        "152": "};",
        "153": "",
        "154": "",
        "155": "",
        "156": "on_change{'btn_wave_download'} = define() {",
        "157": "\twave_download_all();",
        "158": "\t//rescanlibrary( 'wave_ts' );",
        "159": "\tupdate_library_folders( '' );",
        "160": "\t//refresh('location_ts');",
        "161": "\t//refresh('wave_resource_filename_ts');",
        "162": "};",
        "163": "",
        "164": "",
        "165": "// display window for advanced download",
        "166": "function wave_download_all() ",
        "167": "{",
        "168": "\thash = wavetoolkit();",
        "169": "\t// meta data",
        "170": "\tif ( hash{'file'} != '' )",
        "171": "\t{ ",
        "172": "\t\tfn = hash{'file'};",
        "173": "\t\tdn = hash{'folder'};",
        "174": "\t\taf = hash{'addfolder'};",
        "175": "\t\t",
        "176": "\t\tif (af == \"no\")",
        "177": "\t\t{",
        "178": "\t\t\tif ((fn != '') && (dn != ''))",
        "179": "\t\t\t{",
        "180": "\t\t\t\t//value( 'use_specific_ts_wf_wave', 1 );",
        "181": "\t\t\t\tfn = replace(fn, '\\\\', '/');",
        "182": "\t\t\t\t//value( 'user_specified_wave_resource_ts', fn );",
        "183": "\t\t\t}",
        "184": "\t\t}",
        "185": "\t\telse",
        "186": "\t\t{",
        "187": "\t\t\t//rescanlibrary( 'wave_ts' );  //** is this necessary??",
        "188": "\t\t\tif (fn != '')",
        "189": "\t\t\t{",
        "190": "\t\t\t\trescanlibrary( 'wave_ts');",
        "191": "\t\t\t\tvalue( 'location_ts', file_to_key( fn ) );",
        "192": "\t\t\t}",
        "193": "\t\t}",
        "194": "\t\tresponse = yesno('Would you like to build a JPD file from the time series file(s) that were downloaded?');",
        "195": "\t\tif (response) {",
        "196": "\t\t\tjpd_multiyear_gen();",
        "197": "\t\t}",
        "198": "\t}",
        "199": "\t",
        "200": "}",
        "201": "",
        "202": "function update_library_folders( new_path )",
        "203": "{",
        "204": "\t//msgbox('Hello from update_library_folders()');",
        "205": "\tx = get_settings('wave_data_paths');",
        "206": "\t// add new path if provided and it doesn't already exist in the library",
        "207": "\tif ( new_path != '' && dir_exists( new_path ) && ( strpos( x, new_path ) < 0 ) )",
        "208": "\t{",
        "209": "\t\tif ( x != '' ) { x += ';'; }",
        "210": "\t\tx += slash_back_to_forward( new_path );",
        "211": "\t}",
        "212": "\t// list of library folders files to display on separate lines",
        "213": "\tpaths = split( x, ';' );",
        "214": "\t// put wave download folder at top of list",
        "215": "\tclean_list = '';",
        "216": "\t// remove folders in list that no longer exist",
        "217": "\tfor (i = 0; i<#paths; i++ )",
        "218": "\t{",
        "219": "\t\tif ( dir_exists( paths[i] ) )",
        "220": "\t\t{",
        "221": "\t\t\tclean_list += paths[i];",
        "222": "\t\t\tif ( i < #paths-1 ) { clean_list += ';'; }",
        "223": "\t\t}\t",
        "224": "\t}\t\t",
        "225": "\t// update solar_data_paths used by library.cpp and nsrdb.cpp to cleaned list\t\t",
        "226": "\tset_settings('wave_data_paths', clean_list );",
        "227": "\t// update list to display",
        "228": "\tvalue( 'library_folder_list', get_settings('wave_download_path') + '\\n' ",
        "229": "\t       + replace( clean_list , ';' , '\\n' ) );",
        "230": "\trescanlibrary( 'wave_ts' );   ",
        "231": "\trescanlibrary( 'wave' );     ",
        "232": "}",
        "233": "",
        "234": "function slash_back_to_forward( str )",
        "235": "{",
        "236": "\treturn replace( str, '\\\\', '/' );",
        "237": "}",
        "238": "",
        "239": "function file_to_key( file ) ",
        "240": "{",
        "241": "\t\tkey = file_only( file );",
        "242": "\t\tkey = replace( key, '.' + ext_only( file ), '');",
        "243": "\t\treturn key;",
        "244": "}"
    }
}
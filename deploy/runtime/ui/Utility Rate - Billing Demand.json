{
    "Name": "Utility Rate - Billing Demand",
    "Width": 1420.0,
    "Height": 493.0,
    "FormObjects": {
        "GroupBox": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "GroupBox31"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 9.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 3.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 1403.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 479.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "Billing Demand Lookback"
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        },
        "CheckBox": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "chk_update_peaks"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 357.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 129.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 459.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "Use monthly peaks from Year 1 electric load data for Year 0 lookback period"
                },
                "State": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": -1.0
                }
            }
        },
        "Label": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "lbl_monthly_peaks_message"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 834.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 129.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 408.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 51.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": ""
                },
                "TextColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "FontSize": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "WordWrap": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "AlignRight": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "AlignTop": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        },
        "Divider": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "object 21"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 675.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 195.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 722.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 20.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Orientation": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "Colour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 120.0,
                        "Green": 120.0,
                        "Blue": 120.0,
                        "Alpha": 255.0
                    }
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "Billing Demand by Time-of-use Period for Demand Charges"
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        },
        "Divider": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "object 2111"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 21.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 195.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 608.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 20.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Orientation": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "Colour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 120.0,
                        "Green": 120.0,
                        "Blue": 120.0,
                        "Alpha": 255.0
                    }
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "Billing Demand by Month"
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        },
        "Label": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "object 7"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 1089.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 219.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 300.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 82.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "This table must have one row for each TOU period defined in the Demand Rates by Time-of-use Period and/or Tiers table below."
                },
                "TextColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "FontSize": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "WordWrap": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "AlignRight": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "AlignTop": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        },
        "Label": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "object 76"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 33.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 51.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 1206.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 60.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "The billing demand lookback inputs determine how SAM calculates the billing demand, or peak kW value, from previous month peak load values for demand charges (below) with ratcheting demand, and for any energy charges (above) that have kWh/kW units with billing demand based on past peak usage. See Help for details."
                },
                "TextColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "FontSize": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "WordWrap": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "AlignRight": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "AlignTop": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        },
        "DataMatrix": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "ur_billing_demand_lookback_percentages"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 39.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 216.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 575.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 258.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "PasteAppendRows": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "PasteAppendCols": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "ShowButtons": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ShowRows": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "ShowRowLabels": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "RowLabels": {
                    "Type": 5.0,
                    "String": "Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec"
                },
                "ShadeR0C0": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "VerticalLabel": {
                    "Type": 5.0,
                    "String": ""
                },
                "HorizontalLabel": {
                    "Type": 5.0,
                    "String": ""
                },
                "ShadeC0": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "ShowCols": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "ShowColLabels": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ColLabels": {
                    "Type": 5.0,
                    "String": "Billing Demand Percentage (%),Consider Actual Peak Demand (0/1)"
                },
                "NumRowsLabel": {
                    "Type": 5.0,
                    "String": "Number entries:"
                },
                "NumColsLabel": {
                    "Type": 5.0,
                    "String": "Cols:"
                },
                "Layout": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "ChoiceColumn": {
                    "Type": 3.0,
                    "Integer": -1.0
                },
                "Choices": {
                    "Type": 5.0,
                    "String": ""
                },
                "HideColumn": {
                    "Type": 3.0,
                    "Integer": -1.0
                },
                "ShowColumn": {
                    "Type": 3.0,
                    "Integer": -1.0
                },
                "ColorMap": {
                    "Type": 2.0,
                    "Boolean": 0.0
                }
            }
        },
        "Numeric": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "ur_billing_demand_lookback_period"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 165.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 129.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 90.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Value": {
                    "Type": 1.0,
                    "Double": 0.0
                },
                "Mode": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "Format": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "Decimals": {
                    "Type": 3.0,
                    "Integer": 3.0
                },
                "Prefix": {
                    "Type": 5.0,
                    "String": ""
                },
                "Suffix": {
                    "Type": 5.0,
                    "String": ""
                },
                "ThousandsSep": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "Editable": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ForeColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "BackColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 255.0,
                        "Green": 255.0,
                        "Blue": 255.0,
                        "Alpha": 255.0
                    }
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": -1.0
                }
            }
        },
        "Numeric": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "ur_billing_demand_minimum"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 165.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 156.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 90.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Value": {
                    "Type": 1.0,
                    "Double": 0.0
                },
                "Mode": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Format": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "Decimals": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "Prefix": {
                    "Type": 5.0,
                    "String": ""
                },
                "Suffix": {
                    "Type": 5.0,
                    "String": ""
                },
                "ThousandsSep": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "Editable": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ForeColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "BackColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 255.0,
                        "Green": 255.0,
                        "Blue": 255.0,
                        "Alpha": 255.0
                    }
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": -1.0
                }
            }
        },
        "DataMatrix": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "ur_dc_billing_demand_periods"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 690.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 216.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 374.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 258.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "PasteAppendRows": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "PasteAppendCols": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "ShowButtons": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ShowRows": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ShowRowLabels": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "RowLabels": {
                    "Type": 5.0,
                    "String": ""
                },
                "ShadeR0C0": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "VerticalLabel": {
                    "Type": 5.0,
                    "String": ""
                },
                "HorizontalLabel": {
                    "Type": 5.0,
                    "String": ""
                },
                "ShadeC0": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "ShowCols": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "ShowColLabels": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ColLabels": {
                    "Type": 5.0,
                    "String": "Period,Included In Billing Demand (0/1)"
                },
                "NumRowsLabel": {
                    "Type": 5.0,
                    "String": "Number of entries:"
                },
                "NumColsLabel": {
                    "Type": 5.0,
                    "String": "Cols:"
                },
                "Layout": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "ChoiceColumn": {
                    "Type": 3.0,
                    "Integer": -1.0
                },
                "Choices": {
                    "Type": 5.0,
                    "String": "Choice1,Choice2"
                },
                "HideColumn": {
                    "Type": 3.0,
                    "Integer": -1.0
                },
                "ShowColumn": {
                    "Type": 3.0,
                    "Integer": -1.0
                },
                "ColorMap": {
                    "Type": 2.0,
                    "Boolean": 0.0
                }
            }
        },
        "CheckBox": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "ur_enable_billing_demand"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 21.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 258.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "Enable billing demand lookback"
                },
                "State": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": -1.0
                }
            }
        },
        "MonthlyFactor": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "ur_yearzero_usage_peaks"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 564.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 156.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 96.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 28.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Description": {
                    "Type": 5.0,
                    "String": "Monthly peak demand in Year 0 (kW)"
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": -1.0
                }
            }
        }
    },
    "VarDatabase": {
        "chk_update_peaks": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Copy monthly peaks from Year 1 load data for Year 0 lookback period",
            "Units": " ",
            "Group": "Electricity Rates - Billing Demand",
            "IndexLabels": "",
            "Flags": 5.0,
            "DefaultValue": 0.0,
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "ur_billing_demand_lookback_percentages": {
            "Version": 4.0,
            "Type": 3.0,
            "Label": "Ratchet demand charge rates",
            "Units": " ",
            "Group": "Electricity Rates - Billing Demand",
            "IndexLabels": "",
            "Flags": 1.0,
            "DefaultValue": [
                [
                    0.0
                ]
            ],
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "ur_billing_demand_lookback_period": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Lookback period",
            "Units": "months",
            "Group": "Electricity Rates - Billing Demand",
            "IndexLabels": "",
            "Flags": 0.0,
            "DefaultValue": 0.0,
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "ur_billing_demand_minimum": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Minimum billing demand",
            "Units": "kW",
            "Group": "Electricity Rates - Billing Demand",
            "IndexLabels": "",
            "Flags": 0.0,
            "DefaultValue": 0.0,
            "UIObject": "Default",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "ur_dc_billing_demand_periods": {
            "Version": 4.0,
            "Type": 3.0,
            "Label": " ",
            "Units": " ",
            "Group": "Electricity Rates - Billing Demand",
            "IndexLabels": "",
            "Flags": 0.0,
            "DefaultValue": [
                [
                    0.0
                ]
            ],
            "UIObject": "DataMatrix",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "ur_enable_billing_demand": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Enable ratchet demand charges",
            "Units": " ",
            "Group": "Electricity Rates - Billing Demand",
            "IndexLabels": "",
            "Flags": 3.0,
            "DefaultValue": 0.0,
            "UIObject": "DataMatrix",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "ur_yearzero_usage_peaks": {
            "Version": 4.0,
            "Type": 2.0,
            "Label": "Monthly peak demand in Year 0",
            "Units": "kW",
            "Group": "Electricity Rates - Billing Demand",
            "IndexLabels": "",
            "Flags": 2.0,
            "DefaultValue": [
                0.0
            ],
            "UIObject": "MonthlyFactor",
            "sscVariableName": "",
            "sscVariableValue": ""
        }
    },
    "Equations": {},
    "Callbacks": {
        "1": "on_load{'Utility Rate - Billing Demand'} = define() {",
        "2": "\tenable_ratchet_demand_charges();",
        "3": "\tcheck_update_year_one_peaks(true);",
        "4": "\tfirstyear_demand_peaks_message();",
        "5": "};",
        "6": "",
        "7": "on_change{'chk_update_peaks'} = define() {",
        "8": "\tcheck_update_year_one_peaks(false);",
        "9": "\tfirstyear_demand_peaks_message();",
        "10": "};",
        "11": "",
        "12": "on_change{'ur_yearzero_usage_peaks'} = define() {",
        "13": "\tfirstyear_demand_peaks_message();",
        "14": "};",
        "15": "",
        "16": "function is_btm() {",
        "17": "\treturn ( financing() != \"Single Owner\"",
        "18": "\t&& financing() != \"Merchant Plant\" &&",
        "19": "\tfinancing() != \"Sale Leaseback\" &&",
        "20": "\tfinancing() != 'Leveraged Partnership Flip' &&",
        "21": "\tfinancing() != 'All Equity Partnership Flip');",
        "22": "}",
        "23": "",
        "24": "function check_update_year_one_peaks(is_on_load) {",
        "25": "\tis_update_peaks_from_load = value('chk_update_peaks');",
        "26": "\tenable('ur_yearzero_usage_peaks', !is_update_peaks_from_load);",
        "27": "\tif ( is_btm() && is_update_peaks_from_load) ",
        "28": "\t{",
        "29": "\t\tif ( value('ur_yearzero_usage_peaks') != value('mpeak'))",
        "30": "\t\t{ ",
        "31": "\t\t\tif (is_on_load) {",
        "32": "\t\t\t\t// If returning to this page with chk_update_peaks == 1, copy the values immediately",
        "33": "\t\t\t\tvalue('ur_yearzero_usage_peaks',value('mpeak'));",
        "34": "\t\t\t}",
        "35": "\t\t\telse {",
        "36": "\t\t\t\tok = yesno('Overwrite Year 0 monthly peak demand?\\nClick Yes to replace Year 0 monthly peak demand with Year 1 values from the Electricity Load page.\\n\\nClick No to cancel.');",
        "37": "\t\t\t\tif ( ok ) { value('ur_yearzero_usage_peaks',value('mpeak')); }",
        "38": "\t\t\t}",
        "39": "\t\t}",
        "40": "\t}\t",
        "41": "}",
        "42": "function firstyear_demand_peaks_message() {",
        "43": "\tmsg = 'Click Edit Values to enter monthly peak demand for Year 0, which is the lookback period for Year 1.';",
        "44": "\tif ( !is_btm() )",
        "45": "\t{",
        "46": "\t\tmsg = 'No electric load data available. Billing demand calculated based on usage for battery charging and self consumption. ' + msg;",
        "47": "\t}",
        "48": "\telseif ( value('load_model') != 1 ) // load_model is null for FOM",
        "49": "\t{",
        "50": "\t\tmsg = 'No load data available. ' + msg;",
        "51": "\t}",
        "52": "\telse // peak demand data is available from load page",
        "53": "\t{",
        "54": "        if ( value('ur_yearzero_usage_peaks') == value('mpeak') )",
        "55": "        { ",
        "56": "            msg = 'Monthly peak demand for Year 0 is the same as the Year 1 load data. Click Edit Values to enter different values for Year 0.'; ",
        "57": "            if ( value('chk_update_peaks') == 1 )",
        "58": "            {",
        "59": "                msg += ' Clear the check box to enable Edit Values.';",
        "60": "            }",
        "61": "        }",
        "62": "    }",
        "63": "\tproperty('lbl_monthly_peaks_message','Caption',msg);",
        "64": "}",
        "65": "",
        "66": "on_change{'ur_enable_billing_demand'} = define() {",
        "67": "\tenable_ratchet_demand_charges();",
        "68": "\tif (is_btm()) {",
        "69": "\t\tcheck_update_year_one_peaks(false);",
        "70": "\t\tfirstyear_demand_peaks_message();",
        "71": "\t}",
        "72": "};",
        "73": "",
        "74": "function enable_ratchet_demand_charges()",
        "75": "{",
        "76": "\tis_enabled = (value('ur_enable_billing_demand')==1);",
        "77": "\tdc_enabled = (value('ur_dc_enable')==1);",
        "78": "\tenable('ur_billing_demand_lookback_percentages',is_enabled);",
        "79": "\tenable('ur_billing_demand_lookback_period',is_enabled);",
        "80": "\tenable('ur_billing_demand_minimum',is_enabled);",
        "81": "\tenable('ur_dc_billing_demand_periods',is_enabled && dc_enabled);",
        "82": "\tenable('ur_yearzero_usage_peaks',is_enabled);",
        "83": "\tshow('lbl_monthly_peaks_message',is_enabled);",
        "84": "\tif ( is_btm() )",
        "85": "\t{",
        "86": "\t\t// calculated monthly peaks data only available from UI",
        "87": "\t\t// for \"Input Time Series Load Data\" option",
        "88": "\t\tenable('chk_update_peaks',( is_enabled && value('load_model') == 1) );",
        "89": "\t}",
        "90": "\telse // no load data for fom configs",
        "91": "\t{",
        "92": "\t\tvalue('chk_update_peaks', 0);",
        "93": "\t\tshow('chk_update_peaks', false );",
        "94": "\t}\t",
        "95": "\trefresh();",
        "96": "}",
        "97": "",
        "98": "function demand_charge_tou_message(){",
        "99": "\tmsg = '';",
        "100": "\tx = value('ur_dc_tou_mat');",
        "101": "}"
    }
}
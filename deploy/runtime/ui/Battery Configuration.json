{
    "Name": "Battery Configuration",
    "Width": 1053.0,
    "Height": 175.0,
    "FormObjects": {
        "GroupBox": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "Battery Configuration"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 6.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 3.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 1042.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 170.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": "Power Converters"
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        },
        "Numeric": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "batt_ac_dc_efficiency"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 777.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 48.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 90.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Value": {
                    "Type": 1.0,
                    "Double": 0.0
                },
                "Mode": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Format": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Decimals": {
                    "Type": 3.0,
                    "Integer": 3.0
                },
                "Prefix": {
                    "Type": 5.0,
                    "String": ""
                },
                "Suffix": {
                    "Type": 5.0,
                    "String": ""
                },
                "ThousandsSep": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "Editable": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ForeColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "BackColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 255.0,
                        "Green": 255.0,
                        "Blue": 255.0,
                        "Alpha": 255.0
                    }
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": 4.0
                }
            }
        },
        "RadioChoice": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "batt_ac_or_dc"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 27.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 48.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 225.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 51.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Selection": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "Items": {
                    "Type": 6.0,
                    "StringList": "DC Connected|AC Connected"
                },
                "ShowCaptions": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "Horizontal": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": 1.0
                }
            }
        },
        "Numeric": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "batt_dc_ac_efficiency"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 777.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 75.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 90.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Value": {
                    "Type": 1.0,
                    "Double": 0.0
                },
                "Mode": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Format": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Decimals": {
                    "Type": 3.0,
                    "Integer": 3.0
                },
                "Prefix": {
                    "Type": 5.0,
                    "String": ""
                },
                "Suffix": {
                    "Type": 5.0,
                    "String": ""
                },
                "ThousandsSep": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "Editable": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ForeColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "BackColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 255.0,
                        "Green": 255.0,
                        "Blue": 255.0,
                        "Alpha": 255.0
                    }
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": 5.0
                }
            }
        },
        "Numeric": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "batt_dc_dc_efficiency"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 456.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 48.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 90.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Value": {
                    "Type": 1.0,
                    "Double": 0.0
                },
                "Mode": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Format": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Decimals": {
                    "Type": 3.0,
                    "Integer": 3.0
                },
                "Prefix": {
                    "Type": 5.0,
                    "String": ""
                },
                "Suffix": {
                    "Type": 5.0,
                    "String": ""
                },
                "ThousandsSep": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "Editable": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ForeColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "BackColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 255.0,
                        "Green": 255.0,
                        "Blue": 255.0,
                        "Alpha": 255.0
                    }
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": 2.0
                }
            }
        },
        "Numeric": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "batt_inverter_efficiency_cutoff"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 456.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 75.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 90.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Value": {
                    "Type": 1.0,
                    "Double": 0.0
                },
                "Mode": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Format": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Decimals": {
                    "Type": 3.0,
                    "Integer": 3.0
                },
                "Prefix": {
                    "Type": 5.0,
                    "String": ""
                },
                "Suffix": {
                    "Type": 5.0,
                    "String": ""
                },
                "ThousandsSep": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "Editable": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ForeColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "BackColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 255.0,
                        "Green": 255.0,
                        "Blue": 255.0,
                        "Alpha": 255.0
                    }
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": 3.0
                }
            }
        },
        "Numeric": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "batt_ui_inverter_eff"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 456.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 102.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 90.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Value": {
                    "Type": 1.0,
                    "Double": 0.0
                },
                "Mode": {
                    "Type": 3.0,
                    "Integer": 1.0
                },
                "Format": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "Decimals": {
                    "Type": 3.0,
                    "Integer": 3.0
                },
                "Prefix": {
                    "Type": 5.0,
                    "String": ""
                },
                "Suffix": {
                    "Type": 5.0,
                    "String": ""
                },
                "ThousandsSep": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "Editable": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "ForeColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "BackColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 255.0,
                        "Green": 255.0,
                        "Blue": 255.0,
                        "Alpha": 255.0
                    }
                },
                "TabOrder": {
                    "Type": 3.0,
                    "Integer": -1.0
                }
            }
        },
        "Label": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "lbl_dc_ac"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 15.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 21.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 1026.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 24.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": ""
                },
                "TextColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "FontSize": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "WordWrap": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "AlignRight": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "AlignTop": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        },
        "Label": {
            "Visible": 1.0,
            "ObjectProperties": {
                "Name": {
                    "Type": 5.0,
                    "String": "lbl_dc_connected"
                },
                "X": {
                    "Type": 3.0,
                    "Integer": 306.0
                },
                "Y": {
                    "Type": 3.0,
                    "Integer": 129.0
                },
                "Width": {
                    "Type": 3.0,
                    "Integer": 612.0
                },
                "Height": {
                    "Type": 3.0,
                    "Integer": 36.0
                },
                "Tool Tip": {
                    "Type": 5.0,
                    "String": ""
                },
                "Caption": {
                    "Type": 5.0,
                    "String": ""
                },
                "TextColour": {
                    "Type": 4.0,
                    "Color": {
                        "Red": 0.0,
                        "Green": 0.0,
                        "Blue": 0.0,
                        "Alpha": 255.0
                    }
                },
                "Bold": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "FontSize": {
                    "Type": 3.0,
                    "Integer": 0.0
                },
                "WordWrap": {
                    "Type": 2.0,
                    "Boolean": 1.0
                },
                "AlignRight": {
                    "Type": 2.0,
                    "Boolean": 0.0
                },
                "AlignTop": {
                    "Type": 2.0,
                    "Boolean": 1.0
                }
            }
        }
    },
    "VarDatabase": {
        "batt_ac_dc_efficiency": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "AC to DC conversion efficiency",
            "Units": "%",
            "Group": "Battery Power Converters",
            "IndexLabels": "",
            "Flags": 2.0,
            "DefaultValue": 99.0,
            "UIObject": "Numeric",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "batt_ac_or_dc": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Battery DC or AC connected",
            "Units": " ",
            "Group": "Battery Power Converters",
            "IndexLabels": "",
            "Flags": 3.0,
            "DefaultValue": 1.0,
            "UIObject": "RadioChoice",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "batt_dc_ac_efficiency": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "DC to AC conversion efficiency",
            "Units": "%",
            "Group": "Battery Power Converters",
            "IndexLabels": "",
            "Flags": 2.0,
            "DefaultValue": 99.0,
            "UIObject": "Numeric",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "batt_dc_dc_efficiency": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "DC to DC conversion efficiency",
            "Units": "%",
            "Group": "Battery Power Converters",
            "IndexLabels": "",
            "Flags": 2.0,
            "DefaultValue": 99.0,
            "UIObject": "Numeric",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "batt_inverter_efficiency_cutoff": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "Inverter efficiency cutoff",
            "Units": "%",
            "Group": "Battery Power Converters",
            "IndexLabels": "",
            "Flags": 2.0,
            "DefaultValue": 90.0,
            "UIObject": "Numeric",
            "sscVariableName": "",
            "sscVariableValue": ""
        },
        "batt_ui_inverter_eff": {
            "Version": 4.0,
            "Type": 1.0,
            "Label": "PV inverter nominal efficiency",
            "Units": "%",
            "Group": "Battery Power Converters",
            "IndexLabels": "",
            "Flags": 8.0,
            "DefaultValue": 0.0,
            "UIObject": "Numeric",
            "sscVariableName": "",
            "sscVariableValue": ""
        }
    },
    "Equations": {
        "1": "equations{'batt_ui_inverter_eff'} = define() {",
        "2": "\t// note PVWatts default inv_eff set to 96% in cmod_pvwattsv7.cpp var table",
        "3": "\tif ( technology() != 'PV Battery' ) { return 96; }\t",
        "4": "\tinv_model = ${inverter_model};",
        "5": "\tif (inv_model == 0){ return ${inv_snl_eff_cec};\t\t}",
        "6": "\telseif (inv_model == 1) { return ${inv_ds_eff}; }",
        "7": "\telseif (inv_model == 2) { return ${inv_pd_eff}; }",
        "8": "\telseif (inv_model == 3) { return ${inv_cec_cg_eff_cec}; }",
        "9": "\telse { return 96; } ",
        "10": "};"
    },
    "Callbacks": {
        "1": "on_load{'Battery Configuration'} = define()",
        "2": "{",
        "3": "\tmsg = '';",
        "4": "\t// for ac-only configs, set to AC-connected",
        "5": "\tif ( !is_dc_tech() ) // AC-connected only",
        "6": "\t{",
        "7": "\t\tvalue('batt_ac_or_dc',1);",
        "8": "\t\tmsg = 'For the Generic Battery, Standalone Battery, MEwave Battery, and Fuel Cell configurations, the battery can only be AC-connected.';",
        "9": "\t}",
        "10": "\telse // PV Battery can be DC- or AC-connected",
        "11": "\t{",
        "12": "\t\tmsg = 'For the PV Battery configuration, the battery can be connected either to the DC or AC side of the PV inverter.';",
        "13": "\t}",
        "14": "\tproperty('lbl_dc_ac','Caption',msg);\t",
        "15": "\tenable_inputs();",
        "16": "};",
        "17": "",
        "18": "on_change{'batt_ac_or_dc'} = define()",
        "19": "{",
        "20": "\tenable_inputs();",
        "21": "\tif (is_dc_tech() && behind_the_meter()) {",
        "22": "\t\tenable_disable_powerflow_options();",
        "23": "\t}",
        "24": "};",
        "25": "",
        "26": "function is_dc_tech()",
        "27": "{",
        "28": "\ttech = technology();",
        "29": "\treturn !(tech == 'Generic Battery' || tech == 'Fuel Cell' || tech == 'Standalone Battery' || tech == 'MEwave Battery'); // AC-connected only",
        "30": "}",
        "31": "",
        "32": "function enable_inputs()",
        "33": "{",
        "34": "\tif ( is_dc_tech() ) ",
        "35": "\t{",
        "36": "\t\tenable('batt_ac_or_dc',true);",
        "37": "\t\tisdc = ( value('batt_ac_or_dc') == 0 );",
        "38": "\t\tenable('batt_dc_dc_efficiency', isdc);",
        "39": "\t\tenable('batt_inverter_efficiency_cutoff',isdc);",
        "40": "\t\tenable('batt_ui_inverter_eff',isdc);",
        "41": "\t\tenable('batt_ac_dc_efficiency', !isdc);",
        "42": "\t\tenable('batt_dc_ac_efficiency', !isdc);",
        "43": "\t\t",
        "44": "\t\tif (isdc) { msg = 'The DC-connected battery battery stops charging or discharging when the PV inverter operating efficiency is less than the inverter efficiency cutoff.'; }",
        "45": "\t\telse { msg = ''; }",
        "46": "\t\tproperty('lbl_dc_connected','Caption',msg);",
        "47": "\t}",
        "48": "\telse",
        "49": "\t{",
        "50": "\t\tenable('batt_ac_or_dc',false);",
        "51": "\t\tenable('batt_dc_dc_efficiency',false);",
        "52": "\t\tenable('batt_inverter_efficiency_cutoff',false);",
        "53": "\t\tenable('batt_ui_inverter_eff',false);",
        "54": "\t}",
        "55": "}",
        "56": ""
    }
}